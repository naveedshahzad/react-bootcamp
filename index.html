<!DOCTYPE html>
<html>
  <head>
    <title> First React App </title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  </head>
  <body>
    <div id='app'>Eyo</div>
    <script type='text/babel'>
      //<!--<button onClick={()=> {console.log(name);}}> Remove</button>-->
      function FriendsList(props){
        return (
          <>
          <h1>Active Friends</h1>
          <ul>
            {props.list.map((name) => (
              <li key={name}>
                <span>{name}</span>
                <button onClick={()=> {props.onRemoveFriend(name)}}> Remove</button>
                <button> Deactivate</button>
              </li>
            ))}
          </ul>
          <h1>Inactive Friends</h1>
          <ul>
            {props.inactiveList.map((name) => (
              <li key={name}>
                <span>{name}</span>
                <button onClick={()=> {onActivateFriend(name)}}> Activate</button>
              </li>
            ))}
          </ul>
          </>
        )
      }

      class App extends React.Component {
        constructor(props){
          super(props)

          this.state = {
            friends: ['Jordyn', 'Mikenzi'],
            inactiveFriends: ['Jake'],
            input: ''
          }

          this.handleDeActivateFriend = this.handleDeActivateFriend.bind(this)
          this.handleRemoveAllFriends = this.handleRemoveAllFriends.bind(this)
          this.handleActivateFriend = this.handleActivateFriend.bind(this)
          this.handleRemoveFriend = this.handleRemoveFriend.bind(this)
          this.handleAddFriend = this.handleAddFriend.bind(this)
          this.updateInput = this.updateInput.bind(this)
        }

        handleAddFriend(){
          if(this.state.input){
            this.setState((currentState)=> {
              return {
                friends: currentState.friends.concat([this.state.input]),
                input: ''
              }
            })
          }
        }

        handleRemoveFriend(name){
          this.setState((currentState)=> {
            return {
              friends: currentState.friends.filter((friend)=> friend !== name)
            }
          })
        }

        handleRemoveAllFriends(){
          this.setState({
            friends: [],
            inactiveFriends: [],
          })
        }

        handleDeActivateFriend(name){
        }

        handleActivateFriend(name){
          if(currentState.friends.filter((friend)=> friend === name).length === 1 ){
            this.setState((currentState)=> {
              return {
                friends: currentState.friends.filter((friend)=> friend !== name)
                inactiveFriends: currentState.friends.concat([name]),
                input: ''
              }
            })
          }
        }

        updateInput(e){
          const value = e.target.value;
          this.setState({
            input: value
          })
        }

        render() {

          return (
            <div>
            <input
              type='text'
              placeholder='new friend'
              value={this.state.input}
              onChange={this.updateInput}
            />
            <button onClick={this.handleAddFriend}>Submit</button>
            <button onClick={this.handleRemoveAllFriends}>Clear All</button>
            <FriendsList
              list={this.state.friends}
              inactiveList={this.state.inactiveFriends}
              onRemoveFriend={this.handleRemoveFriend}
              onActivateFriend={this.handleActivateFriend}
              onDeActivateFriend={this.handleDeActivateFriend}
            />
            </div>
          )
        }
      }

      ReactDOM.render(
        <App name='Tyler' />,
        document.getElementById('app')
      )
    </script>
  </body>
</html>
